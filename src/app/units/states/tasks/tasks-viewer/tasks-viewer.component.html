<!-- Wide Window Display -->
<div fxLayout="column" fxFill fxHide fxShow.gt-sm>
  <div fxLayout="row" fxLayoutAlign="center stretch" fxFill>

      <!-- Panel 1 -->
      <div #tasklistpanel  id="tasklistpanel" class="vertical-panel">
        <f-unit-task-list [unitTasks]="taskDefs"></f-unit-task-list>
      </div>
      <div
        *ngIf="subs$ | async"
        id="leftResizerEl"
        #leftResizerEl
        class="resizer"
        cdkDragLockAxis="x"
        cdkDrag
        (cdkDragMoved)="dragging($event, tasklistpanel)"
        (cdkDragEnded)="stoppedDragging($event, tasklistpanel)"
        (cdkDragStarted)="startedDragging($event, tasklistpanel)"
      ></div>

      <!-- Panel 2 -->
      <div fxFlex class="vertical-panel">
        <f-task-sheet-view [taskDef]="selectedTaskDef"> </f-task-sheet-view>
      </div>
      <div
        id="rightResizerEl"
        #rightResizerEl
        class="resizer"
        cdkDragLockAxis="x"
        cdkDrag
        (cdkDragMoved)="dragging($event, taskdetailspanel)"
        (cdkDragEnded)="stoppedDragging($event, taskdetailspanel)"
        (cdkDragStarted)="startedDragging($event, taskdetailspanel)"
      ></div>

      <!-- Panel 3 -->
      <div #taskdetailspanel class="vertical-panel" id="taskdetailspanel">
        <f-task-details-view [taskDef]="selectedTaskDef" [unit]="unit"></f-task-details-view>
      </div>
  </div>
</div>

<!-- Narrow Window / Mobile Display -->
<div #mobile fxLayout="row" fxFill fxHide fxShow.lt-md>
  <div class="vertical-panel mobile" [hidden]="taskSelected">
    <f-unit-task-list [unitTasks]="taskDefs"></f-unit-task-list>
  </div>

  <div [hidden]="!taskSelected" fxLayout="column" fxFill fxLayoutAlign="space-between stretch">
    <div class="flex items-center">
      <button mat-icon-button aria-label="Back to task list" matTooltip="Back to list" (click)="taskSelected = false">
        <mat-icon>arrow_back_ios_new</mat-icon>
      </button>
    </div>

    <div fxFlex class="vertical-panel mobile">
      <f-task-details-view [taskDef]="selectedTaskDef" [unit]="unit"></f-task-details-view>
    </div>
  </div>
</div>
